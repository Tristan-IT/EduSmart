# Test API Endpoints for Adapti Portal
# Use REST Client extension in VS Code to run these

### Variables
@baseUrl = http://localhost:5000/api
@email = student@test.com
@password = test123

### 1. Login to get JWT token
# @name login
POST http://localhost:5000/api/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}

### Extract token from login response
@authToken = {{login.response.body.token}}

### 2. Get Gamification Profile
GET {{baseUrl}}/gamification/profile
Authorization: Bearer {{authToken}}

### 3. Add XP
POST {{baseUrl}}/gamification/xp
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "amount": 50,
  "reason": "Completed daily goal"
}

### 4. Get Skill Tree (All nodes)
GET {{baseUrl}}/skill-tree
Authorization: Bearer {{authToken}}

### 5. Get User's Skill Tree (with progress)
GET {{baseUrl}}/skill-tree/user
Authorization: Bearer {{authToken}}

### 6. Complete a Skill Node
POST {{baseUrl}}/skill-tree/node/node-1/complete
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "score": 85
}

### 7. Get All Achievements
GET {{baseUrl}}/achievements
Authorization: Bearer {{authToken}}

### 8. Get User's Achievements
GET {{baseUrl}}/achievements/user
Authorization: Bearer {{authToken}}

### 9. Get Quiz Questions
GET {{baseUrl}}/quizzes/algebra/questions?difficulty=easy&limit=5
Authorization: Bearer {{authToken}}

### 10. Submit Quiz
POST {{baseUrl}}/quizzes/submit
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "topicId": "algebra",
  "answers": [
    {
      "questionId": "REPLACE_WITH_ACTUAL_QUESTION_ID",
      "userAnswer": "A"
    }
  ],
  "timeSpent": 120
}

### 11. Claim Daily Goal
POST {{baseUrl}}/gamification/streak/claim
Authorization: Bearer {{authToken}}

### 12. Get Gem Balance
GET {{baseUrl}}/gamification/gems
Authorization: Bearer {{authToken}}

### 13. Spend Gems
POST {{baseUrl}}/gamification/gems/spend
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "amount": 10,
  "reason": "Bought hint"
}

### 14. Get Gem History
GET {{baseUrl}}/gamification/gems/history
Authorization: Bearer {{authToken}}

### 15. Check Achievements
POST {{baseUrl}}/gamification/achievements/check
Authorization: Bearer {{authToken}}

### 16. Get Recent Achievements
GET {{baseUrl}}/achievements/recent?limit=5
Authorization: Bearer {{authToken}}

### 17. Get Next Available Nodes
GET {{baseUrl}}/skill-tree/next
Authorization: Bearer {{authToken}}

### 18. Get Skill Tree Progress
GET {{baseUrl}}/skill-tree/progress
Authorization: Bearer {{authToken}}
